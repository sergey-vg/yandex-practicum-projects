# Прогнозирование оттока клиентов в сети отелей

## Цель проекта
Для привлечения клиентов сеть отелей добавила на свой сайт возможность забронировать номер без предоплаты. Но возникла следующая проблема: при отмене бронирования клиентом компания терпела убытки. Для решения проблемы необходимо разработать модель машинного обучения, которая предсказывает отказ от брони. Клиенту, который определяется моделью как потенциально отказавшийся от брони, предлагается внести депозит. Депозит составляет 80% от стоимости номера за одни сутки и затрат на разовую уборку.

## Исходные данные
Заказчиком было предоставлено два датасета: с обучающими данными и тестовыми. В тестовом датасете содержатся данные за 2017 год (8 месяцев), в обучающем - за 2015 год (6 месяцев) и 2016 год (12 месяцев).

Основная бизнес-метрика для любой сети отелей — её прибыль. Прибыль отеля — это разница между стоимостью номера за все ночи и затратами на обслуживание: как при подготовке номера, так и при проживании постояльца. В отеле есть несколько типов номеров. В зависимости от типа номера назначается стоимость за одну ночь. Есть также затраты на уборку. Если клиент снял номер надолго, то убираются каждые два дня.

Стоимость номеров отеля:
- категория A: за ночь — 1 000, разовое обслуживание — 400;
- категория B: за ночь — 800, разовое обслуживание — 350;
- категория C: за ночь — 600, разовое обслуживание — 350;
- категория D: за ночь — 550, разовое обслуживание — 150;
- категория E: за ночь — 500, разовое обслуживание — 150;
- категория F: за ночь — 450, разовое обслуживание — 150;
- категория G: за ночь — 350, разовое обслуживание — 150.

В ценовой политике отеля используются сезонные коэффициенты: весной и осенью цены повышаются на 20%, летом — на 40%.

На разработку системы прогнозирования заложен бюджет — 400 000. При этом необходимо учесть, что внедрение модели должно окупиться за год. Затраты на разработку должны быть меньше той выручки, которую система принесёт компании.

## Используемые библиотеки
Для запуска проекта необходимо установить следующие библиотеки:
- matplotlib
- pandas
- sklearn
- scipy
- random
 
## Итоговые результаты

* Рекомендую внедрить модель логистической регрессии, она приносит наибольшую прибыль - 9,64 млн. руб. за неполный 2017 г.

Модель  | F1 | r2 | AUC-ROC | Чистая прибыль от внедреняя модели, млн. р. | Средняя прибыль с клиета, р.| Рост средней прибыли с клиента, %
:------- | :--------:| :--------:| :--------:| :--------:| :--------:| :--------:
Логистическая регрессия  |	0.6732 | 0.8276 | 0.7591 | 9.64	| 1447.16	| 27.22%
Случайный лес |	0.6656 | 0.8439 | 0.77 | 8.92	 | 1425.19 | 25.29%
KNN  |	0.4807 | 0.7284	| 0.7018	| 5.32 | 1313.92 | 15.51%

* Показатели каждой модели:
    * Случайный лес:
        * Модель окупает себя, чистая прибыль от внедрения модели 8,92 млн. руб.;
        * Средняя прибыль после внедрения модели выросла до 1425.19, рост составил - 25.29%;
        * Показатели модели на тестовой выборке:
            * Значение F1-меры: 0.6656;
            * Значение AUC-ROC: 0.8439;
            * Доля правильных ответов: 0.77.
    * Логистическая регрессия:
        * Модель окупает себя, чистая прибыль от внедрения модели 9,64 млн. руб.;
        * Средняя прибыль после внедрения модели выросла до 1447.16, рост составил - 27.22%;
        * Показатели модели на тестовой выборке:
            * Значение F1-меры: 0.6732;
            * Значение AUC-ROC: 0.8276;
            * Доля правильных ответов: 0.7591.
    * KNN:
        * Модель окупает себя, чистая прибыль от внедрения модели 5,32 млн. руб.;
        * Средняя прибыль после внедрения модели выросла до 1313.92 руб., рост составил - 15.51%;
        * Показатели модели на тестовой выборке:
            * Значение F1-меры: 0.4807;
            * Значение AUC-ROC: 0.7284;
            * Доля правильных ответов: 0.7018.

Признаки «ненадёжного» клиента:

* Клиенты, которые заселяются без младенцев, предположительная вероятность отмены брони 36,99%, против 18,14%;
* Клиенты, которые не делали хотя бы одно изменение в заказе, предположительная вероятность отмены брони 40,42%, против 14,7%;
* Клиенты из Португалии и Китая, предположительная вероятность отмены брони 57,59% и 44,49% соответственно;
* Клиенты, которые оформляют заказ не группой, предположительная вероятность отмены брони 29-39%, против 8,36%;
* Клиенты, которые ожидали подтверждения заказа от одного дня и более, предположительная вероятность отмены брони 65,73%, против 35,36%;
* Клиенты, с каналом дистрибуции "TA/TO", предположительная вероятность отмены брони 40,41%, против 21% и меньше;
* Клиенты, которые ранее не бронировали номера, предположительная вероятность отмены брони 37,19%, против 25,24% ;
* Чем больше кол-во дней от момента бронирования до момента прибытия, тем выше вероятность отказа клиента от брони;
* Клиенты, у которых включён завтрак, обед и ужин, предположительная вероятность отмены брони 68,96% против 38,51% и меньше;
* Клиенты, у которых отсутствуют подтвержденные заказы, предположительная вероятность отмены брони 37,6% против 6,35%;
* Клиенты, у которых есть отменённые заказы, предположительная вероятность отмены брони 97,48% против 31,29%;
* Клиенты, которым не нужно парковочное место, предположительная вероятность отмены брони 39,07%, а клиенты, которым нужно парковочное место не отменяют бронь;
* Клиенты, с заказом номера типа "A", предположительная вероятность отмены брони 39,05%, против 32,26% и меньше;
* Клиенты, у которых отсутствуют специальные отметки, предположительная вероятность отмены брони 47,95% против 18,5%. По мере увеличения кол-ва специальных отметок, вероятность отмены бронирования снижается.
